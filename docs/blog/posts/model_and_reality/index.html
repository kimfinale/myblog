<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jong-Hoon Kim">
<meta name="dcterms.date" content="2023-04-18">

<title>Disease modeling for public health - The Model and Reality: Bridging Mathematical Frameworks with Real-World Infectious Disease Dynamics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../../site_libs/viz-1.8.2/viz.js"></script>
<link href="../../../site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="../../../site_libs/grViz-binding-1.0.11/grViz.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Disease modeling for public health</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../research/index.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kimfinale" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jong-hoon-kim-6447325/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tarzanthoreau" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#surrogate-reasoning-how-models-help-us-understand-reality" id="toc-surrogate-reasoning-how-models-help-us-understand-reality" class="nav-link" data-scroll-target="#surrogate-reasoning-how-models-help-us-understand-reality"><span class="header-section-number">2</span> Surrogate Reasoning: How Models Help Us Understand Reality</a></li>
  <li><a href="#the-representation-problem" id="toc-the-representation-problem" class="nav-link" data-scroll-target="#the-representation-problem"><span class="header-section-number">3</span> The Representation Problem</a></li>
  <li><a href="#models-as-tools-for-knowledge-rather-than-perfect-representations" id="toc-models-as-tools-for-knowledge-rather-than-perfect-representations" class="nav-link" data-scroll-target="#models-as-tools-for-knowledge-rather-than-perfect-representations"><span class="header-section-number">4</span> Models as Tools for Knowledge Rather Than Perfect Representations</a></li>
  <li><a href="#case-study-covid-19-modeling" id="toc-case-study-covid-19-modeling" class="nav-link" data-scroll-target="#case-study-covid-19-modeling"><span class="header-section-number">5</span> Case Study: COVID-19 Modeling</a></li>
  <li><a href="#bridging-the-gap-model-validation-and-refinement" id="toc-bridging-the-gap-model-validation-and-refinement" class="nav-link" data-scroll-target="#bridging-the-gap-model-validation-and-refinement"><span class="header-section-number">6</span> Bridging the Gap: Model Validation and Refinement</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">7</span> Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Model and Reality: Bridging Mathematical Frameworks with Real-World Infectious Disease Dynamics</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jong-Hoon Kim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 18, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>As infectious disease modelers, we face a fundamental epistemological question: How can abstract mathematical constructs help us understand and predict the complex dynamics of disease transmission in the real world? This question lies at the intersection of epidemiology, mathematics, and philosophy of science.</p>
<p>Drawing from the Stanford Encyclopedia of Philosophy’s entry on scientific models <span class="citation" data-cites="stanford_models_science">(<a href="#ref-stanford_models_science" role="doc-biblioref">Frigg and Hartmann 2020</a>)</span>, I’d like to explore how we connect our mathematical representations to reality, particularly in the context of infectious disease modeling.</p>
</section>
<section id="surrogate-reasoning-how-models-help-us-understand-reality" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="surrogate-reasoning-how-models-help-us-understand-reality"><span class="header-section-number">2</span> Surrogate Reasoning: How Models Help Us Understand Reality</h2>
<p>Philosophers describe our relationship with models as a process of “surrogate reasoning” or “model-based reasoning.” Through building, manipulating, applying, and evaluating models, we can make inferences about reality without directly experimenting on it—an especially crucial approach when dealing with infectious diseases.</p>
<p>This reasoning process can be divided into two phases:</p>
<ol type="1">
<li>Understanding the model itself</li>
<li>Translating that understanding to the real-world target system</li>
</ol>
<p>When building a model, we learn how different components interact mathematically. For instance, in an SIR model, we define relationships between susceptible, infected, and recovered populations <span class="citation" data-cites="anderson_infectious_1991">(<a href="#ref-anderson_infectious_1991" role="doc-biblioref">Anderson and May 1991</a>)</span>. Through manipulation—changing parameters, running simulations, and analyzing outputs—we develop intuition about the system’s behavior under different conditions.</p>
<p>But the critical challenge remains: How do we translate knowledge gained from manipulating abstract equations to meaningful insights about actual disease transmission?</p>
</section>
<section id="the-representation-problem" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="the-representation-problem"><span class="header-section-number">3</span> The Representation Problem</h2>
<p>For a model to be useful, it must represent relevant aspects of reality. If we’re interested in how vaccination might reduce infection rates, our model must incorporate mechanisms that capture both vaccination dynamics and disease transmission accurately.</p>
<p>Yet how can we be sure our mathematical representations adequately reflect reality? This is where empirical validation becomes essential. We compare model predictions against observed data—testing whether our models actually predict what happens in outbreaks. When discrepancies arise, we refine our models, creating an iterative cycle of improvement.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'DiagrammeR' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-a5c8f88d1b5742dc389f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a5c8f88d1b5742dc389f">{"x":{"diagram":"\ndigraph model_cycle {\n  graph [rankdir = LR]\n  \n  node [shape = box, style = filled, fillcolor = lightblue]\n  \n  A [label = \"Model Development\"]\n  B [label = \"Parameter Estimation\"]\n  C [label = \"Model Prediction\"]\n  D [label = \"Validation with Real Data\"]\n  E [label = \"Model Refinement\"]\n  \n  A -> B -> C -> D -> E\n  E -> A [label = \"Iterative Process\"]\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>Simple visualization of the model validation cycle</p>
</div>
</div>
</section>
<section id="models-as-tools-for-knowledge-rather-than-perfect-representations" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="models-as-tools-for-knowledge-rather-than-perfect-representations"><span class="header-section-number">4</span> Models as Tools for Knowledge Rather Than Perfect Representations</h2>
<p>It’s important to recognize that all models are simplifications. As statistician George Box famously noted, “All models are wrong, but some are useful” <span class="citation" data-cites="box_science_statistics">(<a href="#ref-box_science_statistics" role="doc-biblioref">Box 1987</a>)</span>. The value of a model isn’t in its perfect replication of reality but in its ability to provide useful insights despite its limitations.</p>
<p>In infectious disease modeling, we often make simplifying assumptions—homogeneous mixing of populations, identical susceptibility across age groups, or simplified immune responses. These assumptions make the mathematics tractable but create distance from biological reality.</p>
</section>
<section id="case-study-covid-19-modeling" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="case-study-covid-19-modeling"><span class="header-section-number">5</span> Case Study: COVID-19 Modeling</h2>
<p>The COVID-19 pandemic provided a dramatic illustration of both the power and limitations of epidemiological modeling. Early models helped forecast hospital capacity needs and evaluate potential intervention strategies <span class="citation" data-cites="adam_special_report ferguson_impact_2020">(<a href="#ref-adam_special_report" role="doc-biblioref">Adam 2020</a>; <a href="#ref-ferguson_impact_2020" role="doc-biblioref">Ferguson et al. 2020</a>)</span>. However, they also demonstrated how sensitive predictions can be to underlying assumptions about transmission rates, asymptomatic spread, and behavioral responses <span class="citation" data-cites="ioannidis_forecasting_2020">(<a href="#ref-ioannidis_forecasting_2020" role="doc-biblioref">Ioannidis, Cripps, and Tanner 2020</a>)</span>.</p>
<p>When models failed to accurately predict outcomes, this wasn’t necessarily a failure of modeling itself but often reflected limitations in our understanding of the virus or changes in human behavior that models couldn’t anticipate <span class="citation" data-cites="holmdahl_wrong_2020">(<a href="#ref-holmdahl_wrong_2020" role="doc-biblioref">Holmdahl and Buckee 2020</a>)</span>. Each discrepancy became an opportunity to refine both our models and our understanding of disease dynamics.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Example SIR model simulation showing potential COVID-19 scenarios with different intervention strategies</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="bridging-the-gap-model-validation-and-refinement" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="bridging-the-gap-model-validation-and-refinement"><span class="header-section-number">6</span> Bridging the Gap: Model Validation and Refinement</h2>
<p>How can we strengthen the connection between our models and reality? Several approaches are crucial:</p>
<ol type="1">
<li><strong>Empirical validation</strong>: Continuously comparing model outputs with real-world data</li>
<li><strong>Sensitivity analysis</strong>: Understanding how changes in parameters affect outcomes</li>
<li><strong>Ensemble modeling</strong>: Using multiple modeling approaches to gain more robust insights</li>
<li><strong>Incorporating heterogeneity</strong>: Adding complexity to capture more realistic population structures</li>
<li><strong>Interdisciplinary collaboration</strong>: Working with behavioral scientists, immunologists, and other experts to better represent complex dynamics</li>
</ol>
</section>
<section id="conclusion" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">7</span> Conclusion</h2>
<p>As infectious disease modelers, we navigate a fascinating epistemological landscape. Our models serve as cognitive tools that allow us to explore complex dynamics in ways that would be impossible through direct observation alone. They help us generate hypotheses, evaluate potential interventions, and develop intuition about non-linear systems.</p>
<p>While the gap between model and reality can never be completely closed, the iterative process of building, testing, and refining models brings us progressively closer to useful representations of disease transmission. The philosophical challenge of connecting abstract mathematical structures to biological reality remains at the heart of our discipline—a challenge that makes epidemiological modeling both intellectually stimulating and practically valuable for public health.</p>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-adam_special_report" class="csl-entry" role="listitem">
Adam, David. 2020. <span>“Special Report: The Simulations Driving the World’s Response to COVID-19.”</span> <em>Nature</em> 580 (7803): 316–18. <a href="https://doi.org/10.1038/d41586-020-01003-6">https://doi.org/10.1038/d41586-020-01003-6</a>.
</div>
<div id="ref-anderson_infectious_1991" class="csl-entry" role="listitem">
Anderson, Roy M., and Robert M. May. 1991. <em>Infectious Diseases of Humans: Dynamics and Control</em>. Oxford: Oxford University Press.
</div>
<div id="ref-box_science_statistics" class="csl-entry" role="listitem">
Box, George E. P. 1987. <em>Empirical Model-Building and Response Surfaces</em>. New York: Wiley.
</div>
<div id="ref-ferguson_impact_2020" class="csl-entry" role="listitem">
Ferguson, Neil M., Daniel Laydon, Gemma Nedjati-Gilani, Natsuko Imai, Kylie Ainslie, Marc Baguelin, Sangeeta Bhatia, et al. 2020. <span>“Impact of Non-Pharmaceutical Interventions (NPIs) to Reduce <span>COVID-19</span> Mortality and Healthcare Demand.”</span> <em>Imperial College COVID-19 Response Team</em>. <a href="https://doi.org/10.25561/77482">https://doi.org/10.25561/77482</a>.
</div>
<div id="ref-stanford_models_science" class="csl-entry" role="listitem">
Frigg, Roman, and Stephan Hartmann. 2020. <span>“Models in Science.”</span> Edited by Edward N. Zalta. <em>The Stanford Encyclopedia of Philosophy</em>. <a href="https://plato.stanford.edu/entries/models-science/">https://plato.stanford.edu/entries/models-science/</a>.
</div>
<div id="ref-holmdahl_wrong_2020" class="csl-entry" role="listitem">
Holmdahl, Inga, and Caroline Buckee. 2020. <span>“Wrong but Useful — What Covid-19 Epidemiologic Models Can and Cannot Tell Us.”</span> <em>New England Journal of Medicine</em> 383 (4): 303–5. <a href="https://doi.org/10.1056/NEJMp2016822">https://doi.org/10.1056/NEJMp2016822</a>.
</div>
<div id="ref-ioannidis_forecasting_2020" class="csl-entry" role="listitem">
Ioannidis, John P. A., Sally Cripps, and Martin A. Tanner. 2020. <span>“Forecasting for <span>COVID-19</span> Has Failed.”</span> <em>International Journal of Forecasting</em>. <a href="https://doi.org/10.1016/j.ijforecast.2020.08.004">https://doi.org/10.1016/j.ijforecast.2020.08.004</a>.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="kimfinale/myblog" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>